# Code generated by craft; DO NOT EDIT.

#############################
#        STAGE BUILD        #
#############################
FROM golang:latest AS build

WORKDIR /app

COPY . .

# hadolint ignore=DL3059
RUN go mod download
# hadolint ignore=DL3059
RUN CGO_ENABLED=0 go build -o golang-api-api cmd/golang-api-api/main.go

#############################
#         STAGE RUN         #
#############################
FROM alpine:3

RUN addgroup -S nonroot && adduser -S nonroot -G nonroot

WORKDIR /app

COPY --from=build \
    /app/golang-api-api \
    ./

EXPOSE 3000

USER nonroot

ENTRYPOINT [ "/app/golang-api-api" ]