// Code generated by craft; DO NOT EDIT.

// https://docs.renovatebot.com/configuration-options/

{
    "extends": [ ":gitSignOff" ],
    "enabled": true,
    "branchPrefix": "renovate/",
    "labels": [ "dependencies" ],

    "branchConcurrentLimit": 0,
    "prConcurrentLimit": 0,
    "prCreation": "immediate",
    "prHourlyLimit": 0,

    "ignorePaths": [
        "**/bower_components/**",
        "**/examples/**",
        "**/fixtures/**",
        "**/node_modules/**",
        "**/test/**",
        "**/testdata/**",
        "**/tests/**",
    ],

    "dependencyDashboard": false,
    "osvVulnerabilityAlerts": false, // https://github.com/renovatebot/renovate/discussions/20542
    "forkProcessing": "disabled",

    "minimumReleaseAge": "5 days",
    "fetchChangeLogs": "pr",

    "semanticCommits": "auto",
    "semanticCommitType": "chore",
    "semanticCommitScope": "deps",

    "separateMajorMinor": true,
    "separateMinorPatch": false,
    "separateMultipleMajor": true,
    "separateMultipleMinor": false,

    "baseBranches": [
        "$default",
        "/^v[0-9]+\.x/",
        "/^v[0-9]+\.[0-9]+\.x/",
    ],

    "reviewers": [
        "kilianpaquier",
    ],
    "bbUseDefaultReviewers": true,
    "gitLabIgnoreApprovals": true,

    "assignAutomerge": true,
    "automerge": "false",
    "automergeStrategy": "fast-forward",
    "automergeType": "pr",
    "platformAutomerge": true,

    "rebaseLabel": "rebase",
    "rebaseWhen": "behind-base-branch",
    "recreateWhen": "auto",
    "stopUpdatingLabel": "pause",

    "commitMessageLowerCase": "auto",
    "configMigration": false, // removes comments and sets indent to 2 and add a lot of newlines (https://github.com/renovatebot/renovate/issues/16359)
    "platformCommit": "auto",

    "goGetDirs": [ "./..." ],
    "postUpdateOptions": [
        "gomodTidy",
        "gomodUpdateImportPaths",
        "helmUpdateSubChartArchives"
    ],
    "rangeStrategy": "bump",
    "updateLockFiles": true,
    "useBaseBranchConfig": "none",

    "lockFileMaintenance": { "automerge": true },
    "major": { "automerge": false },
    "minor": { "automerge": true },
    "patch": { "automerge": true },
    "pin": { "automerge": true },

    "packageRules": [
        {
            "addLabels": [ "non-major" ],
            "groupName": "cd dependencies (non major)",
            "matchCategories": [ "cd" ],
            "matchUpdateTypes": [ "!major" ]
        },
        {
            "addLabels": [ "major" ],
            "groupName": "cd dependencies (major)",
            "matchCategories": [ "cd" ],
            "matchUpdateTypes": [ "major" ]
        },
        {
            "addLabels": [ "non-major" ],
            "groupName": "ci dependencies (non major)",
            "matchCategories": [ "ci" ],
            "matchUpdateTypes": [ "!major" ]
        },
        {
            "addLabels": [ "major" ],
            "groupName": "ci dependencies (major)",
            "matchCategories": [ "ci" ],
            "matchUpdateTypes": [ "major" ]
        },
        {
            "addLabels": [ "non-major" ],
            "groupName": "golang dependencies (non major)",
            "matchCategories": [ "golang" ],
            "matchUpdateTypes": [ "!major" ]
        },
        {
            "addLabels": [ "major" ],
            "groupName": "golang dependencies (major)",
            "matchCategories": [ "golang" ],
            "matchUpdateTypes": [ "major" ]
        },
    ],

    "customManagers": [
        {
            "customType": "regex",
            "description": "Update versions in .tmpl files",
            "managerFilePatterns": [ "/^*.tmpl$/" ],
            "matchStrings": [
                // GitLab CI/CD 'include' versions
                "renovate: datasource=(?<datasource>.+)( depName=(?<depName>.+))? ( packageName=(?<packageName>.+))? versioning=(?<versioning>.+).+?\n\s*?ref:\\s?\\"?(?<currentValue>.+)\\"?",

                // GitHub Actions 'uses' versions
                "renovate: datasource=(?<datasource>.+)( depName=(?<depName>.+))? ( packageName=(?<packageName>.+))? versioning=(?<versioning>.+).+?\n\s*?-?uses:\\s?(?<packageName>.+)@v?(?<currentValue>.+)",

                // GitHub Actions 'with' versions
                "renovate: datasource=(?<datasource>.+)( depName=(?<depName>.+))? ( packageName=(?<packageName>.+))? versioning=(?<versioning>.+).+?\n\s*?.*?version:\\s?v?(?<currentValue>.+)",
            ]
        }
    ],
}
