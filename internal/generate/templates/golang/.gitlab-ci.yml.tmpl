# Code generated by craft; DO NOT EDIT.

---
include:
  - project: kilianpaquier/cicd
    ref: $CICD_INDUS_BRANCH # should be main or latest tag in most cases
    file:
      - pipeline/go.yml
<<- $binaries := dict >>
<<- $_ := map $binaries .Clis .Crons .Jobs .Workers >>
<<- if and (not .NoDockerfile) (gt (len $binaries) 0) >>
      - pipeline/deployable.yml
<<- end >>

<<- if gt (len .Clis) 0 >>

<<- if not .NoGoreleaser >>

.variables: &VARIABLES
  # additional assets to be added to release
  # see https://github.com/semantic-release/gitlab#assets
  PUBLISH_RELEASE_ASSETS: >
    [ 
        { "path": "CHANGELOG.md", "label": "CHANGELOG.md" },
        { "path": "checksums.txt" },
        { "path": "dist/*.apk" },
        { "path": "dist/*.deb" },
        { "path": "dist/*.rpm" },
        { "path": "dist/*.tar.gz" },
        { "path": "dist/*.zip" }
    ]
<<- else >>

.variables: &VARIABLES
  # additional assets to be added to release
  # see https://github.com/semantic-release/gitlab#assets
  PUBLISH_RELEASE_ASSETS: >
    [ 
        { "path": "CHANGELOG.md", "label": "CHANGELOG.md" },
        { "path": "checksums.txt" },
        { "path": "dist/*" }
    ]

go-build:
  variables:
    BUILD_OPTS: -ldflags="-X << .ModuleName >>/internal/cobra.version=$$IMAGE_VERSION"

<<- end >>

version:
  variables:
    <<"<<">>: *VARIABLES

publish:dry-run:
  variables:
    <<"<<">>: *VARIABLES

publish:
  variables:
    <<"<<">>: *VARIABLES
<<- end >>
